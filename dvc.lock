schema: '2.0'
stages:
  ingest:
    cmd: python src/ingest_api.py data/raw/data.csv
    deps:
    - path: src/ingest_api.py
      hash: md5
      md5: c53ef9c511709faefc0c9a79d5393404
      size: 1966
    params:
      params.yaml:
        ingest.api_url: http://127.0.0.1:5000/generate_synthetic_data
    outs:
    - path: data/raw
      hash: md5
      md5: 585633cf965ad40b1df7f97da169dbe7.dir
      size: 142039
      nfiles: 1
  ingest_static:
    cmd: python src/ingest_static.py data/raw/static/static_data.csv
    deps:
    - path: src/ingest_static.py
      hash: md5
      md5: b838eaaad915a0c8b59b2fd45421feaa
      size: 1246
    params:
      params.yaml:
        ingest.csv_url: 
          https://raw.githubusercontent.com/dsrscientist/DSData/master/Telecom_customer_churn.csv
    outs:
    - path: data/raw/static
      hash: md5
      md5: d3c0c20c848c3e4291690abe1ab818ee.dir
      size: 977501
      nfiles: 1
  ingest_api:
    cmd: python src/ingest_api.py data/raw/api/api_data.csv
    deps:
    - path: src/ingest_api.py
      hash: md5
      md5: f06ff221e6eef0ab628be5cd2ac04bcc
      size: 1931
    params:
      params.yaml:
        ingest.api_url: http://127.0.0.1:5000/generate_synthetic_data
    outs:
    - path: data/raw/api
      hash: md5
      md5: 0cba35f493737f1138935b9652b5f81f.dir
      size: 143132
      nfiles: 1
  validate:
    cmd: python src/validate.py data/raw/api/api_data.csv data/raw/static/static_data.csv
      data/report/validation_report.json
    deps:
    - path: data/raw/api
      hash: md5
      md5: 0cba35f493737f1138935b9652b5f81f.dir
      size: 143132
      nfiles: 1
    - path: data/raw/static
      hash: md5
      md5: d3c0c20c848c3e4291690abe1ab818ee.dir
      size: 977501
      nfiles: 1
    - path: src/validate.py
      hash: md5
      md5: b9c15d85a5b27a1df79c7b079795744b
      size: 1906
    outs:
    - path: data/report
      hash: md5
      md5: e1ebed7f2575a347368852e19a2034a6.dir
      size: 788
      nfiles: 1
  prepare:
    cmd: python src/prepare.py data/raw/api/api_data.csv data/raw/static/static_data.csv
    deps:
    - path: data/report
      hash: md5
      md5: e1ebed7f2575a347368852e19a2034a6.dir
      size: 788
      nfiles: 1
    - path: src/prepare.py
      hash: md5
      md5: 9da402e3c6a3d58776999618065e2d33
      size: 5223
    outs:
    - path: data/processed
      hash: md5
      md5: 178241991ff85050ab3f13972fc91e70.dir
      size: 960925
      nfiles: 2
  store:
    cmd: python src/store.py data/processed/api/api_data.csv data/processed/static/static_data.csv
    deps:
    - path: data/processed
      hash: md5
      md5: 178241991ff85050ab3f13972fc91e70.dir
      size: 960925
      nfiles: 2
    - path: src/store.py
      hash: md5
      md5: e740a5afc9f60fdfa16f554edff86f00
      size: 3378
